{% extends "base_app.html" %}
{% block title %}{{ t.start_test }} - CEFR Level{% endblock %}

{% block head %}
<style>
    .section-card-3d {
        background: var(--bg-card);
        border: 2px solid var(--border-color);
        border-radius: 20px;
        transition: all 0.15s ease;
    }
    .section-card-3d:hover {
        border-color: var(--border-light);
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(0,0,0,0.3);
    }
    .step-dot {
        width: 40px; height: 40px;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-weight: 800; font-size: 14px;
        transition: all 0.2s ease;
    }
    .step-dot.active { background: var(--duo-green); color: white; box-shadow: 0 3px 0 var(--duo-green-dark); }
    .step-dot.pending { background: var(--border-color); color: var(--text-muted); }
</style>
{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 md:px-6 py-6 md:py-10">
    <!-- Header -->
    <div class="text-center mb-8 md:mb-12">
        <div class="text-4xl md:text-5xl mb-3">&#127919;</div>
        <h1 class="text-2xl md:text-4xl font-black text-white mb-3">
            {% if lang == 'uz' %}Test bo'limlari{% else %}Test Sections{% endif %}
        </h1>
        <p class="text-[#AFAFAF] text-sm md:text-lg max-w-2xl mx-auto font-medium">
            {% if lang == 'uz' %}Uch bo'limni ketma-ket bajaring{% else %}Complete three sections in order{% endif %}
        </p>
    </div>

    <!-- Progress Steps -->
    <div class="flex items-center justify-center gap-2 mb-8 md:mb-12 max-w-xs mx-auto">
        <div class="step-dot active">1</div>
        <div class="flex-1 h-1 bg-[#2B4148] rounded"></div>
        <div class="step-dot pending">2</div>
        <div class="flex-1 h-1 bg-[#2B4148] rounded"></div>
        <div class="step-dot pending">3</div>
    </div>

    <!-- Section Cards -->
    <div class="grid md:grid-cols-3 gap-4 md:gap-6 mb-8 md:mb-12">
        <!-- Reading -->
        <div class="section-card-3d p-5 md:p-6">
            <div class="text-3xl md:text-4xl mb-3">&#128214;</div>
            <span class="inline-block px-3 py-1 bg-[#1CB0F6]/15 text-[#1CB0F6] text-xs font-black rounded-full mb-2 border border-[#1CB0F6]/30">{% if lang == 'uz' %}Birinchi{% else %}First{% endif %}</span>
            <h3 class="text-xl md:text-2xl font-black text-white mb-2">Reading</h3>
            <div class="space-y-2 mb-4 text-[#AFAFAF] text-sm font-medium">
                <div class="flex items-center gap-2"><span class="text-[#58CC02]">&#10004;</span> 4 Part, 40 {% if lang == 'uz' %}savol{% else %}questions{% endif %}</div>
                <div class="flex items-center gap-2"><span class="text-[#58CC02]">&#10004;</span> {% if lang == 'uz' %}Matn tushunish{% else %}Comprehension{% endif %}</div>
            </div>
            <div class="flex items-center justify-between pt-3 border-t-2 border-[#2B4148]">
                <span class="text-[#777] font-bold text-sm">&#9201; 60 {% if lang == 'uz' %}daqiqa{% else %}min{% endif %}</span>
            </div>
        </div>

        <!-- Listening -->
        <div class="section-card-3d p-5 md:p-6">
            <div class="text-3xl md:text-4xl mb-3">&#127911;</div>
            <span class="inline-block px-3 py-1 bg-[#CE82FF]/15 text-[#CE82FF] text-xs font-black rounded-full mb-2 border border-[#CE82FF]/30">{% if lang == 'uz' %}Ikkinchi{% else %}Second{% endif %}</span>
            <h3 class="text-xl md:text-2xl font-black text-white mb-2">Listening</h3>
            <div class="space-y-2 mb-4 text-[#AFAFAF] text-sm font-medium">
                <div class="flex items-center gap-2"><span class="text-[#58CC02]">&#10004;</span> 4 Part, 30 {% if lang == 'uz' %}savol{% else %}questions{% endif %}</div>
                <div class="flex items-center gap-2"><span class="text-[#58CC02]">&#10004;</span> {% if lang == 'uz' %}Audio tinglash{% else %}Audio listening{% endif %}</div>
            </div>
            <div class="flex items-center justify-between pt-3 border-t-2 border-[#2B4148]">
                <span class="text-[#777] font-bold text-sm">&#9201; 40 {% if lang == 'uz' %}daqiqa{% else %}min{% endif %}</span>
            </div>
        </div>

        <!-- Writing -->
        <div class="section-card-3d p-5 md:p-6">
            <div class="text-3xl md:text-4xl mb-3">&#9997;&#65039;</div>
            <span class="inline-block px-3 py-1 bg-[#58CC02]/15 text-[#58CC02] text-xs font-black rounded-full mb-2 border border-[#58CC02]/30">{% if lang == 'uz' %}Uchinchi{% else %}Third{% endif %}</span>
            <h3 class="text-xl md:text-2xl font-black text-white mb-2">Writing</h3>
            <div class="space-y-2 mb-4 text-[#AFAFAF] text-sm font-medium">
                <div class="flex items-center gap-2"><span class="text-[#58CC02]">&#10004;</span> Task 1, 2 + Essay</div>
                <div class="flex items-center gap-2">
                    <span class="px-2 py-0.5 bg-[#CE82FF] text-white text-[10px] font-black rounded" style="box-shadow: 0 1px 0 #A560E8;">AI</span>
                    {% if lang == 'uz' %}AI baholaydi{% else %}AI evaluated{% endif %}
                </div>
            </div>
            <div class="flex items-center justify-between pt-3 border-t-2 border-[#2B4148]">
                <span class="text-[#777] font-bold text-sm">&#9201; 80 {% if lang == 'uz' %}daqiqa{% else %}min{% endif %}</span>
            </div>
        </div>
    </div>

    <!-- Instructions -->
    <div class="duo-card p-5 md:p-6 mb-8 md:mb-10 border-[#FF9600]/30">
        <h3 class="text-base md:text-lg font-black text-[#FF9600] mb-4">&#9888;&#65039; {% if lang == 'uz' %}Muhim{% else %}Important{% endif %}</h3>
        <ul class="space-y-3 text-[#AFAFAF] text-sm font-medium">
            <li class="flex items-start gap-3"><span class="text-[#58CC02] font-black">1.</span> {% if lang == 'uz' %}Reading → Listening → Writing ketma-ket{% else %}Reading → Listening → Writing in order{% endif %}</li>
            <li class="flex items-start gap-3"><span class="text-[#58CC02] font-black">2.</span> {% if lang == 'uz' %}Yuborganingizdan keyin orqaga qaytib bo'lmaydi{% else %}Cannot go back after submitting{% endif %}</li>
            <li class="flex items-start gap-3"><span class="text-[#58CC02] font-black">3.</span> {% if lang == 'uz' %}Writing AI tomonidan baholanadi{% else %}Writing evaluated by AI{% endif %}</li>
            <li class="flex items-start gap-3"><span class="text-[#58CC02] font-black">4.</span> {% if lang == 'uz' %}Natijalar profilga saqlanadi{% else %}Results saved to profile{% endif %}</li>
        </ul>
    </div>

    <!-- Start Button -->
    <div class="text-center">
        <a href="/test/reading" class="btn-duo btn-duo-green px-12 md:px-16 py-4 md:py-5 text-lg md:text-xl inline-flex items-center gap-3">
            {% if lang == 'uz' %}Boshlash{% else %}Start{% endif %} &#127919;
        </a>
        <p class="mt-4 text-[#777] text-xs md:text-sm font-medium">
            ~3 {% if lang == 'uz' %}soat{% else %}hours{% endif %} | Session: <span class="font-mono text-[#AFAFAF]">{{ session_id[:8] }}...</span>
        </p>

        {% if user %}
        <div class="mt-4 xp-badge inline-flex">
            &#11088; {% if lang == 'uz' %}{{ (user.free_tests or 0) + (user.purchased_tests or 0) }} ta test mavjud{% else %}{{ (user.free_tests or 0) + (user.purchased_tests or 0) }} tests available{% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
